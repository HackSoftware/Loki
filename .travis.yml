language: python
python:
- '3.4'
addons:
  postgresql: '9.3'
services: postgresql
install:
- pip install -r requirements.txt --use-mirrors
before_script:
- psql -c 'CREATE DATABASE testdb;' -U postgres
script:
- python loki/manage.py migrate
- cd loki
- coverage run --source='.' manage.py test
after_success:
- coveralls --rcfile=.coverage.rc
notifications:
  slack:
    secure: UJWWLC1NEy5slof7PrsrpGjL0ydS7jHBkeog6owqSk6avgOlbE7xGvKNiLfawJOIJ9SkOzaKJIxnCZ37QutT70gtwnb/a+cLK1XhNXuAiRE9OKIFCRSsMX3FxEX0YHIeHE1Q4EoMOr7pCWAFCGRReZNhAHvpRkfzO0F1KBtbCLI=
    on_success: change
    on_failure: change
